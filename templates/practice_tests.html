{% extends "base.html" %}

{% block title %}Practice Tests - OET Preparation{% endblock %}

{% block content %}
<style>
    .test-card {
        transition: all 0.3s ease;
        cursor: pointer;
    }
    .test-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
    }
    .section-badge {
        position: absolute;
        top: 10px;
        right: 10px;
    }
    .test-stat {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.9em;
        color: #6c757d;
    }
    .section-header {
        border-bottom: 3px solid #dee2e6;
        padding-bottom: 15px;
        margin-bottom: 20px;
    }
</style>

<div class="row mb-5">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center">
            <h1><i class="fas fa-book me-2 text-primary"></i>Practice Tests</h1>
            <div>
                <a href="{{ url_for('mock_tests') }}" class="btn btn-primary">
                    <i class="fas fa-star me-2"></i>Full Mock Tests
                </a>
            </div>
        </div>
        <p class="text-muted mt-2">Master each OET section individually with targeted practice tests</p>
    </div>
</div>

<!-- Reading Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="section-header">
            <h2><i class="fas fa-book-open me-2" style="color: #667eea;"></i>Reading Comprehension</h2>
            <p class="text-muted mb-0">45 minutes • 4 passages • Improve your reading speed and comprehension</p>
        </div>
    </div>
    <div class="col-12">
        {% set reading_tests = tests|selectattr("section", "equalto", "Reading")|list %}
        {% if reading_tests %}
            <div class="row g-4">
                {% for test in reading_tests %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm test-card">
                        <div class="card-body position-relative">
                            <div class="section-badge">
                                {% if test.get('is_premium', False) %}
                                    <span class="badge bg-warning">Premium</span>
                                {% else %}
                                    <span class="badge bg-success">Free</span>
                                {% endif %}
                            </div>
                            <h5 class="card-title mb-2 pe-5">{{ test.title }}</h5>
                            <p class="card-text text-muted small mb-3">{{ test.description }}</p>
                            
                            <div class="mb-3">
                                <div class="test-stat mb-2">
                                    <i class="fas fa-clock"></i>
                                    <span>{{ test.duration_minutes }} minutes</span>
                                </div>
                                <div class="test-stat mb-2">
                                    <i class="fas fa-file-alt"></i>
                                    <span>4 passages with questions</span>
                                </div>
                            </div>
                            
                            <a href="{{ url_for('take_test', test_id=test.id) }}" class="btn btn-primary btn-sm w-100">
                                <i class="fas fa-arrow-right me-2"></i>Start Test
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                No reading practice tests available yet
            </div>
        {% endif %}
    </div>
</div>

<!-- Writing Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="section-header">
            <h2><i class="fas fa-pen-fancy me-2" style="color: #f5576c;"></i>Professional Writing</h2>
            <p class="text-muted mb-0">45 minutes • 2 tasks • Write professional letters and case notes</p>
        </div>
    </div>
    <div class="col-12">
        {% set writing_tests = tests|selectattr("section", "equalto", "Writing")|list %}
        {% if writing_tests %}
            <div class="row g-4">
                {% for test in writing_tests %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm test-card">
                        <div class="card-body position-relative">
                            <div class="section-badge">
                                {% if test.get('is_premium', False) %}
                                    <span class="badge bg-warning">Premium</span>
                                {% else %}
                                    <span class="badge bg-success">Free</span>
                                {% endif %}
                            </div>
                            <h5 class="card-title mb-2 pe-5">{{ test.title }}</h5>
                            <p class="card-text text-muted small mb-3">{{ test.description }}</p>
                            
                            <div class="mb-3">
                                <div class="test-stat mb-2">
                                    <i class="fas fa-clock"></i>
                                    <span>{{ test.duration_minutes }} minutes</span>
                                </div>
                                <div class="test-stat mb-2">
                                    <i class="fas fa-tasks"></i>
                                    <span>2 writing tasks</span>
                                </div>
                            </div>
                            
                            <a href="{{ url_for('take_test', test_id=test.id) }}" class="btn btn-primary btn-sm w-100">
                                <i class="fas fa-arrow-right me-2"></i>Start Test
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                No writing practice tests available yet
            </div>
        {% endif %}
    </div>
</div>

<!-- Listening Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="section-header">
            <h2><i class="fas fa-headphones me-2" style="color: #00f2fe;"></i>Listening Comprehension</h2>
            <p class="text-muted mb-0">30 minutes • 2 passages • Understand medical conversations</p>
        </div>
    </div>
    <div class="col-12">
        {% set listening_tests = tests|selectattr("section", "equalto", "Listening")|list %}
        {% if listening_tests %}
            <div class="row g-4">
                {% for test in listening_tests %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm test-card">
                        <div class="card-body position-relative">
                            <div class="section-badge">
                                {% if test.get('is_premium', False) %}
                                    <span class="badge bg-warning">Premium</span>
                                {% else %}
                                    <span class="badge bg-success">Free</span>
                                {% endif %}
                            </div>
                            <h5 class="card-title mb-2 pe-5">{{ test.title }}</h5>
                            <p class="card-text text-muted small mb-3">{{ test.description }}</p>
                            
                            <div class="mb-3">
                                <div class="test-stat mb-2">
                                    <i class="fas fa-clock"></i>
                                    <span>{{ test.duration_minutes }} minutes</span>
                                </div>
                                <div class="test-stat mb-2">
                                    <i class="fas fa-microphone"></i>
                                    <span>Audio passages</span>
                                </div>
                            </div>
                            
                            <a href="{{ url_for('take_test', test_id=test.id) }}" class="btn btn-primary btn-sm w-100">
                                <i class="fas fa-arrow-right me-2"></i>Start Test
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                No listening practice tests available yet
            </div>
        {% endif %}
    </div>
</div>

<!-- Speaking Section -->
<div class="row mb-5">
    <div class="col-12">
        <div class="section-header">
            <h2><i class="fas fa-microphone me-2" style="color: #43e97b;"></i>Professional Speaking</h2>
            <p class="text-muted mb-0">20 minutes • 2 tasks • Record your professional responses</p>
        </div>
    </div>
    <div class="col-12">
        {% set speaking_tests = tests|selectattr("section", "equalto", "Speaking")|list %}
        {% if speaking_tests %}
            <div class="row g-4">
                {% for test in speaking_tests %}
                <div class="col-md-6 col-lg-4">
                    <div class="card h-100 border-0 shadow-sm test-card">
                        <div class="card-body position-relative">
                            <div class="section-badge">
                                {% if test.get('is_premium', False) %}
                                    <span class="badge bg-warning">Premium</span>
                                {% else %}
                                    <span class="badge bg-success">Free</span>
                                {% endif %}
                            </div>
                            <h5 class="card-title mb-2 pe-5">{{ test.title }}</h5>
                            <p class="card-text text-muted small mb-3">{{ test.description }}</p>
                            
                            <div class="mb-3">
                                <div class="test-stat mb-2">
                                    <i class="fas fa-clock"></i>
                                    <span>{{ test.duration_minutes }} minutes</span>
                                </div>
                                <div class="test-stat mb-2">
                                    <i class="fas fa-volume-up"></i>
                                    <span>2 speaking tasks</span>
                                </div>
                            </div>
                            
                            <a href="{{ url_for('take_test', test_id=test.id) }}" class="btn btn-primary btn-sm w-100">
                                <i class="fas fa-arrow-right me-2"></i>Start Test
                            </a>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="alert alert-info">
                <i class="fas fa-info-circle me-2"></i>
                No speaking practice tests available yet
            </div>
        {% endif %}
    </div>
</div>

{% endblock %}
